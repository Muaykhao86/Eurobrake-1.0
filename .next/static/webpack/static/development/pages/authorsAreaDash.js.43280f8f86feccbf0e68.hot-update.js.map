{"version":3,"file":"static/webpack/static/development/pages/authorsAreaDash.js.43280f8f86feccbf0e68.hot-update.js","sources":["webpack:///./pages/authorsAreaDash.js"],"sourcesContent":["import React, { Component } from 'react'\nimport Router from 'next/router';\nimport cookies from 'next-cookies';\nimport cookie from 'js-cookie';\nimport fetch from 'isomorphic-unfetch';\nimport styled from 'styled-components';\nimport Typography from '@material-ui/core/Typography';\nimport ExpandMoreOutlinedIcon from '@material-ui/icons/ExpandMoreOutlined';\nimport { withAuthSync, logout, login } from '../utils/auth'\nimport HeroSection from '../components/HeroSection';\nimport { Button } from '../components/Button';\nimport { StyledBanner, StyledContainer} from '../components/styles/PageStyles';\n\n\n\n\n\nconst StyledPage = styled.div`\n    display: flex;\n    flex-direction: column;\n    align-self: center;\n    max-width: ${props => props.theme.maxWidth};\n    background-color: ${props => props.theme.white};\n\n    .authors{\n        color: ${props => props.theme.primary};\n        font-family: ${props => props.theme.MPLight};\n        font-size: 2rem;\n   \n    &-title{\n        color: ${props => props.theme.primary};\n        font-family: ${props => props.theme.MPSemibold};\n        font-size: 4.4rem;\n        margin-top: 3rem;\n        margin-bottom: 3rem;\n    }\n   \n    &_sub-title{\n        color: ${props => props.theme.primary};\n        font-size: 3.5rem;\n        font-family: ${props => props.theme.MPLightIt};\n        padding-bottom: .5rem;\n        margin-bottom: 3rem;\n    }\n    &-bold{\n        font-family: ${props => props.theme.MPBold};\n    }\n    &-it{\n        font-family: ${props => props.theme.MPLightIt};\n    }\n}\n`;\n\nconst FilledBanner = () => (\n\n    <StyledBanner>\n        <StyledContainer >\n\n            <Typography className=\"banner-heading\"  >Submit your review ready papers</Typography>\n            <Typography className=\"banner-sub\" >Deadline for submissions is 26 January 2020</Typography>\n            <div className=\"banner_bottom\">\n                <ExpandMoreOutlinedIcon className=\"banner_bottom-icon\" />\n                <Typography varient=\"h3\" className=\"banner_bottom-details\">Login below to manage your submission</Typography>\n            </div>\n        </StyledContainer>\n    </StyledBanner>\n)\n\nclass AuthorsAreaDash extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            hasForm: false,\n            formData: undefined,\n            error: '',\n            userLoggedIn: false,\n        }\n\n\n    }\n\n    componentDidMount = () => {\n        const { userLoggedIn } = this.state;\n        const { logintoken } = cookie.get();\n        console.log('cdm', logintoken)\n        logintoken && !userLoggedIn ? this.setState(prev => ({\n            userLoggedIn: !prev\n        })) : null\n    }\n\n    getAbstractForm = async (e) => {\n        e.preventDefault()\n        console.log('click');\n        const { logintoken } = cookie.get();\n        console.log(logintoken)\n        try {\n            const apiUrl = 'https://prelude.eurobrake.net/submit';\n            const response = await fetch(apiUrl, {\n                credentials: 'include',\n                headers: {\n                    Authorization: `Bearer ${logintoken}`,\n                }\n            });\n            const data = await response.json();\n            if (data.status === 'success') {\n                this.setState(prev => (\n                    {\n                        hasForm: !prev,\n                        formData: data.form\n                    }));\n                // console.log(data.form);\n                // console.log('stringify',JSON.stringify(data.form));\n                console.log(data)\n\n\n            } else {\n                let error = new Error(data.error)\n                error.response = response\n                throw error\n            }\n        } catch (error) {\n            console.error(\n                'Failed to get form, please try again', error\n            )\n            this.setState({ error: error.message });\n        }\n    }\n\n\n    handleInputChange = (event) => {\n        const target = event.target;\n        const value = target.type === 'checkbox' ? target.checked : target.value;\n        const name = target.name;\n\n        this.setState({\n            [name]: value\n        });\n    }\n\n    render() {\n\n        const { userLoggedIn, hasForm } = this.state;\n        console.log({ userLoggedIn, hasForm });\n        return (\n            <>\n                <HeroSection banner={FilledBanner}>\n                    Author's Area Dash\n            </HeroSection>\n                <StyledPage>\n                    <Typography className=\"authors-title\">Welcome to the Author's Area</Typography>\n                    <Typography gutterBottom className=\"authors\">Presenting a paper at EuroBrake gives you the opportunity to share your latest technical ideas and achievements with influential specialists from around the world and to discuss your work with colleagues throughout the industrial and academic communities.</Typography>\n                    <Typography gutterBottom className=\"authors\">Once you have created your author account you can login at any time to amend your details and access important information. </Typography>\n                    <Typography gutterBottom className=\"authors authors-it\">Please note that all submitting authors will need to create a new author account for EuroBrake 2020 as account are not copied from year to year.</Typography>\n                    <Typography className=\"authors_sub-title\">Submit your review ready papers by 26 January 2020.</Typography>\n                    <Button\n                        bcolor=\"#134381\"\n                        background=\"#134381\"\n                        br=\"100rem\"\n                        style={{ margin: \"3rem 0\" }}\n                        fs=\"1.8rem\"\n                        padding=\".5rem 6rem\"\n                        onClick={this.getAbstractForm}>Submit a Abstract</Button>\n                    <Button\n                        bcolor=\"#134381\"\n                        background=\"#134381\"\n                        br=\"100rem\"\n                        style={{ margin: \"3rem 0\" }}\n                        fs=\"1.8rem\"\n                        padding=\".5rem 6rem\"\n                        onClick={logout}>logout</Button>\n                </StyledPage>\n            </>\n\n        )\n\n    }\n}\n\n// AuthorsAreaDash.getInitialProps = async ctx => {\n//     // We use `nextCookie` to get the cookie and pass the token to the frontend in the `props`.\n//     const { logintoken } = cookies(ctx);\n//     const apiUrl = 'https://prelude.eurobrake.net/dashboard ';\n//     const redirectOnError = () =>\n//         process.browser\n//             ? Router.push('/authorsArea')\n//             : ctx.res.writeHead(301, { Location: '/authorsArea' })\n//     if (logintoken) {\n//         try {\n//             // console.log({logintoken}, 'getIProps right before fetch call')\n//             const response = await fetch(apiUrl, {\n//                 credentials: 'include',\n//                 cache: 'no-cache',\n//                 headers: {\n//                     Authorization: 'Bearer ' + logintoken,\n//                 }\n//             })\n//             const data = await response.json()\n//             // console.log('Authors response Data =>', data.status, data);\n//             if (data.status === 'success') {\n//                 console.log('res.ok', data)\n//                 return { authorData: data }\n//             }\n//             else {\n//                 console.log('not reading success')\n//                 // https://github.com/developit/unfetch#caveats\n//                 return redirectOnError()\n//             }\n//         } catch (error) {\n//             // Implementation or Network error\n//             console.log(error)\n//             return redirectOnError()\n//         }\n//     }\n\n// }\n\n// export default withAuthSync(AuthorsAreaDash)\nexport default AuthorsAreaDash\n\n\n// !\n// ?\n// *\n// todo"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAMA;AAAA;AAAA;AAAA;AAIA;AAAA;AACA;AAAA;AAGA;AAAA;AACA;AAAA;AAIA;AAAA;AACA;AAAA;AAOA;AAAA;AAEA;AAAA;AAKA;AAAA;AAGA;AAAA;AACA;AAIA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AATA;AACA;AAcA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAYA;AACA;AADA;AAAA;AACA;AAEA;AACA;AAAA;AACA;AADA;AAAA;AAGA;AACA;AApBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAqBA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAIA;AAJA;AAMA;AANA;AAAA;AAQA;AACA;AACA;AADA;AAFA;AACA;AARA;AAOA;AAPA;AAAA;AACA;AADA;AAaA;AACA;AAdA;AAAA;AAAA;AAAA;AACA;AAcA;AAAA;AAEA;AACA;AAFA;AADA;AAMA;AACA;AACA;AADA;AAtBA;AAAA;AACA;AADA;AA0BA;AACA;AA3BA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AA+BA;AACA;AAEA;AAAA;AAAA;AACA;AAnCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAtBA;AAAA;AAAA;AAAA;AACA;AADA;AA6DA;AACA;AACA;AACA;AACA;AAGA;AACA;AAnEA;AACA;AACA;AACA;AACA;AAJA;AAFA;AAUA;AACA;;;AA2DA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaA;;;;AA3GA;AA+GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AADA;AAIA;AACA;AACA;;;;A","sourceRoot":""}