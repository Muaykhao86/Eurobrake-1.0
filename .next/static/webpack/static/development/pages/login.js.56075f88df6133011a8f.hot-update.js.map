{"version":3,"file":"static/webpack/static/development/pages/login.js.56075f88df6133011a8f.hot-update.js","sources":["webpack:///./pages/login.js"],"sourcesContent":["import React, { Component } from 'react'\nimport styled from 'styled-components';\nimport fetch from 'isomorphic-unfetch';\n\n\n\nconst DemoDiv = styled.div`\n    display: flex;\n    flex-direction: column;\n    align-self: center; \n    max-width: ${props => props.theme.maxWidth};\n`;\n\n\nconst Demo = styled.h1`\n    padding: 10rem;\n    margin: 5rem;\n    color: orangered;\n\n`;\n\n\n\nexport default class Login extends Component {\n    static getInitialProps = async function () {\n        const res = await fetch('https://prelude.eurobrake.net/login');\n        const data = await res.json().catch(error => console.log(error));;\n        return {\n            form: data\n        };\n    };\n\n   \nconstructor(props) {\n    super(props);\n    this.state={\n        username: '',\n        password: '',\n        authorLogin: true,\n        error: ''\n    }\n}\n\n    saveToState = (e) => {\n        this.setState({ [e.target.name]: e.target.value });\n    }\n    onSub =(e) => {\n    e.preventDefault()\n        console.log('click1');\n    }\n\n    onSubmit = async (e) =>{\n    e.preventDefault()\n    console.log('click');\n        \n    const {authorLogin, uesername, password, error} = this.state;\n    const apiUrl = authorLogin ? 'https://prelude.eurobrake.net/login' : '' ;\n// action=\"//2019.eurobrake.net/exhibition/exhibitors/login\" SHOULD BE LOGIN FORM FOR EXHIBITORS\n        \n        const formData = {\n            username: username,\n            password: password,\n            \n        }\n    try{\n\n        const response = await fetch(apiUrl, {\n                method: 'POST',\n                credentials: 'include',\n                body: JSON.stringify(formData)\n            });\n\n        if(response.ok) {\n        const data = await response.json()\n        return {\n            loggedIn: data\n            }\n    }else{\n        console.log('login failed')\n        let error = new Error(response.statusText)\n        error.response = response\n        return Promise.reject(error)\n        }\n    }catch (error){\n        console.error(\n            'Failed to login, please try again', error\n            )\n        throw new Error(error)\n    }\n\n}\n\n\nrender(){\n  console.log(this.props)\n    const {form} = this.props.form;\n        return (\n         <DemoDiv onSubmit={this.onSubmit}>\n            <Demo>\n\n            <div className=\"\">\n                <label htmlFor=\"label\">{form[0].label}</label>\n                <input type=\"text\" name={form[0].name} onChange={this.saveToState} value={this.state.username}/>\n            </div>\n            <div className=\"\">    \n                <label htmlFor=\"label\">{form[1].label}</label>\n                <input type=\"password\" name={form[1].name} onChange={this.saveToState} value={this.state.password}/>\n            </div>\n            </Demo>\n            <input type=\"submit\" value=\"Submit\"/>\n        </DemoDiv>\n        )\n    }\n}\n\n\n\n// !!! NOTE IF I GO TO '/' IT GETS RID OF THE LOGGED IN COOKIE !!!"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAIA;AAAA;AAAA;AAAA;AAIA;AAAA;AAIA;AAAA;AAAA;AAAA;AACA;AAQA;;;;;AAUA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAWA;AACA;AACA;AAbA;AAcA;AACA;AACA;AACA;AAjBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkBA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAKA;AACA;AAEA;AACA;AACA;AAFA;AARA;AAAA;AAAA;AAgBA;AACA;AACA;AAHA;AACA;AAhBA;AAeA;AACA;AAhBA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAsBA;AAtBA;AAwBA;AADA;AACA;AAxBA;AA2BA;AACA;AACA;AA7BA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAiCA;AAjCA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAnBA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAFA;AAQA;AACA;;;AAmDA;AACA;AADA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;;;;AAzFA;AACA;AACA;AAFA;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AADA;AAAA;AAEA;AAAA;AACA;AAHA;AAEA;AAAA;AAFA;AAIA;AADA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;A","sourceRoot":""}