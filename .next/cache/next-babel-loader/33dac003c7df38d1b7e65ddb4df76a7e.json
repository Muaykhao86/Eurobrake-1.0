{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/mnt/c/Users/D.Hardiman/desktop/eurobrake/pages/authorsAreaDash.js\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport Router from 'next/router';\nimport cookies from 'next-cookies';\nimport cookie from 'js-cookie';\nimport fetch from 'isomorphic-unfetch';\nimport styled from 'styled-components';\nimport Typography from '@material-ui/core/Typography';\nimport ExpandMoreOutlinedIcon from '@material-ui/icons/ExpandMoreOutlined';\nimport CreateIcon from '@material-ui/icons/Create';\nimport AssignmentIcon from '@material-ui/icons/Assignment';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport { withAuthSync, logout, login } from '../utils/auth';\nimport HeroSection from '../components/HeroSection';\nimport { Button } from '../components/Button';\nimport { StyledBanner, StyledContainer } from '../components/styles/PageStyles';\nconst StyledPage = styled.div.withConfig({\n  displayName: \"authorsAreaDash__StyledPage\",\n  componentId: \"sc-1jtqy5t-0\"\n})([\"display:flex;flex-direction:column;align-self:center;max-width:\", \";background-color:\", \";margin-top:7rem;.authors{color:\", \";font-family:\", \";font-size:2rem;&-title{color:\", \";font-family:\", \";font-size:4.4rem;margin-top:3rem;}&_sub-title{color:\", \";font-size:3.5rem;font-family:\", \";padding-bottom:.5rem;}&-bold{font-family:\", \";}&-it{font-family:\", \";}&_action-box{display:flex;justify-content:space-between;}}\"], props => props.theme.maxWidth, props => props.theme.white, props => props.theme.primary, props => props.theme.MPLight, props => props.theme.primary, props => props.theme.MPSemibold, props => props.theme.primary, props => props.theme.MPLightIt, props => props.theme.MPBold, props => props.theme.MPLightIt);\nconst StyledBox = styled.div.withConfig({\n  displayName: \"authorsAreaDash__StyledBox\",\n  componentId: \"sc-1jtqy5t-1\"\n})([\"display:flex;justify-content:space-between;flex:1 1 auto;min-height:15rem;background-color:#D4DDE8;padding:1rem;\"]);\n\nconst FilledBanner = () => __jsx(StyledBanner, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 72\n  },\n  __self: this\n}, __jsx(StyledContainer, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 73\n  },\n  __self: this\n}, __jsx(Typography, {\n  className: \"banner-heading\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 75\n  },\n  __self: this\n}, \"Welcome to the Author's Area\"), __jsx(Typography, {\n  className: \"banner-sub\",\n  sfs: \"3rem\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 76\n  },\n  __self: this\n}, \"Submit your review ready papers by 26 January 2020\"), __jsx(\"div\", {\n  className: \"banner_bottom\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 77\n  },\n  __self: this\n}, __jsx(ExpandMoreOutlinedIcon, {\n  className: \"banner_bottom-icon\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 78\n  },\n  __self: this\n}), __jsx(Typography, {\n  varient: \"h3\",\n  className: \"banner_bottom-details\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 79\n  },\n  __self: this\n}, \"Submit your review ready papers by 26 January 2020\"))));\n\nclass AuthorsAreaDash extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"componentDidMount\", () => {\n      const {\n        userLoggedIn\n      } = this.state;\n      const {\n        logintoken\n      } = cookie.get();\n      console.log('cdm', logintoken);\n      logintoken && !userLoggedIn ? this.setState(prev => ({\n        userLoggedIn: !prev\n      })) : null;\n    });\n\n    _defineProperty(this, \"getAbstractForm\", async e => {\n      e.preventDefault();\n      console.log('click');\n      const {\n        logintoken\n      } = cookie.get();\n      console.log(logintoken);\n\n      try {\n        const apiUrl = 'https://prelude.eurobrake.net/submit';\n        const response = await fetch(apiUrl, {\n          credentials: 'include',\n          headers: {\n            Authorization: `Bearer ${logintoken}`\n          }\n        });\n        const data = await response.json();\n\n        if (data.status === 'success') {\n          this.setState(prev => ({\n            hasForm: !prev,\n            formData: data.form\n          })); // console.log(data.form);\n          // console.log('stringify',JSON.stringify(data.form));\n\n          console.log(data);\n        } else {\n          let error = new Error(data.error);\n          error.response = response;\n          throw error;\n        }\n      } catch (error) {\n        console.error('Failed to get form, please try again', error);\n        this.setState({\n          error: error.message\n        });\n      }\n    });\n\n    _defineProperty(this, \"handleInputChange\", event => {\n      const target = event.target;\n      const value = target.type === 'checkbox' ? target.checked : target.value;\n      const name = target.name;\n      this.setState({\n        [name]: value\n      });\n    });\n\n    this.state = {\n      hasForm: false,\n      formData: undefined,\n      error: '',\n      userLoggedIn: false\n    };\n  }\n\n  render() {\n    // const {name} = this.props.authorData;\n    const {\n      userLoggedIn,\n      hasForm\n    } = this.state;\n    console.log({\n      userLoggedIn,\n      hasForm\n    });\n    return __jsx(React.Fragment, null, __jsx(HeroSection, {\n      banner: FilledBanner,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, \"Author's Area Dashboard\"), __jsx(StyledPage, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: \"authors\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, __jsx(Typography, {\n      className: \"authors-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, \"Hi \", '*USERNAME*'), __jsx(Typography, {\n      gutterBottom: true,\n      className: \"authors_sub-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, \"Welcome to the Author's Area\"), __jsx(\"div\", {\n      className: \"authors_action-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, __jsx(Button, {\n      bcolor: \"#134381\",\n      background: \"#134381\",\n      br: \"100rem\",\n      padding: \"0.5rem 2rem\",\n      style: {\n        margin: \".5rem 0\"\n      },\n      fontSize: \"1.7rem\",\n      onClick: this.getAbstractForm,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, __jsx(CreateIcon, {\n      style: {\n        fontSize: '3rem',\n        marginRight: '1rem'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }), \"EDIT PROFILE\"), __jsx(Button, {\n      bcolor: \"#134381\",\n      padding: \"0.5rem 2rem\",\n      background: \"#134381\",\n      br: \"100rem\",\n      style: {\n        margin: \".5rem\"\n      },\n      fontSize: \"1.7rem\",\n      onClick: this.getAbstractForm,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, __jsx(AssignmentIcon, {\n      style: {\n        fontSize: '3rem',\n        marginRight: '.5rem'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }), \"INSTRUCTIONS & TEMPLATES\"), __jsx(Button, {\n      bcolor: \"#134381\",\n      padding: \"0.5rem 2rem\",\n      background: \"#134381\",\n      br: \"100rem\",\n      style: {\n        margin: \".5rem 0\"\n      },\n      fontSize: \"1.7rem\",\n      onClick: logout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, __jsx(ExitToAppIcon, {\n      style: {\n        fontSize: '3rem',\n        marginRight: '.5rem'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }), \"logout\")), __jsx(Typography, {\n      gutterBottom: true,\n      className: \"authors-title\",\n      style: {\n        fontSize: '3rem',\n        borderTop: '2px solid #134381',\n        borderBottom: '2px solid #134381'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, \"Your Abstracts\"), __jsx(StyledBox, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, __jsx(Typography, {\n      gutterBottom: true,\n      className: \"authors-it\",\n      style: {\n        fontSize: '2rem'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, \"You haven't submitted any abstracts yet\")))));\n  }\n\n} // AuthorsAreaDash.getInitialProps = async ctx => {\n//     // We use `nextCookie` to get the cookie and pass the token to the frontend in the `props`.\n//     const { logintoken } = cookies(ctx);\n//     const apiUrl = 'https://prelude.eurobrake.net/dashboard ';\n//     const redirectOnError = () =>\n//         process.browser\n//             ? Router.push('/authorsArea')\n//             : ctx.res.writeHead(301, { Location: '/authorsArea' })\n//     if (logintoken) {\n//         try {\n//             // console.log({logintoken}, 'getIProps right before fetch call')\n//             const response = await fetch(apiUrl, {\n//                 credentials: 'include',\n//                 cache: 'no-cache',\n//                 headers: {\n//                     Authorization: 'Bearer ' + logintoken,\n//                 }\n//             })\n//             const data = await response.json()\n//             // console.log('Authors response Data =>', data.status, data);\n//             if (data.status === 'success') {\n//                 console.log('res.ok', data)\n//                 return { authorData: data }\n//             }\n//             else {\n//                 console.log('not reading success')\n//                 // https://github.com/developit/unfetch#caveats\n//                 return redirectOnError()\n//             }\n//         } catch (error) {\n//             // Implementation or Network error\n//             console.log(error)\n//             return redirectOnError()\n//         }\n//     }\n// }\n// export default withAuthSync(AuthorsAreaDash)\n\n\nexport default AuthorsAreaDash; // !\n// ?\n// *\n// todo","map":{"version":3,"sources":["/mnt/c/Users/D.Hardiman/desktop/eurobrake/pages/authorsAreaDash.js"],"names":["React","Component","Router","cookies","cookie","fetch","styled","Typography","ExpandMoreOutlinedIcon","CreateIcon","AssignmentIcon","ExitToAppIcon","CancelIcon","withAuthSync","logout","login","HeroSection","Button","StyledBanner","StyledContainer","StyledPage","div","props","theme","maxWidth","white","primary","MPLight","MPSemibold","MPLightIt","MPBold","StyledBox","FilledBanner","AuthorsAreaDash","constructor","userLoggedIn","state","logintoken","get","console","log","setState","prev","e","preventDefault","apiUrl","response","credentials","headers","Authorization","data","json","status","hasForm","formData","form","error","Error","message","event","target","value","type","checked","name","undefined","render","margin","getAbstractForm","fontSize","marginRight","borderTop","borderBottom"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Router from 'next/router';\nimport cookies from 'next-cookies';\nimport cookie from 'js-cookie';\nimport fetch from 'isomorphic-unfetch';\nimport styled from 'styled-components';\nimport Typography from '@material-ui/core/Typography';\nimport ExpandMoreOutlinedIcon from '@material-ui/icons/ExpandMoreOutlined';\nimport CreateIcon from '@material-ui/icons/Create';\nimport AssignmentIcon from '@material-ui/icons/Assignment';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport { withAuthSync, logout, login } from '../utils/auth'\nimport HeroSection from '../components/HeroSection';\nimport { Button } from '../components/Button';\nimport { StyledBanner, StyledContainer} from '../components/styles/PageStyles';\n\n\n\nconst StyledPage = styled.div`\n    display: flex;\n  \n    flex-direction: column;\n    align-self: center;\n    max-width: ${props => props.theme.maxWidth};\n    background-color: ${props => props.theme.white};\n    margin-top: 7rem;\n\n    .authors{\n        \n        color: ${props => props.theme.primary};\n        font-family: ${props => props.theme.MPLight};\n        font-size: 2rem;\n    &-title{\n        color: ${props => props.theme.primary};\n        font-family: ${props => props.theme.MPSemibold};\n        font-size: 4.4rem;\n        margin-top: 3rem;\n    }\n    &_sub-title{\n        color: ${props => props.theme.primary};\n        font-size: 3.5rem;\n        font-family: ${props => props.theme.MPLightIt};\n        padding-bottom: .5rem;\n    }\n    &-bold{\n        font-family: ${props => props.theme.MPBold};\n    }\n    &-it{\n        font-family: ${props => props.theme.MPLightIt};\n    }\n    &_action-box{\n        display: flex;\n        justify-content: space-between;\n    }\n}\n`;\n\nconst StyledBox = styled.div`\n    display: flex;\n    justify-content: space-between;\n    flex: 1 1 auto;\n    min-height: 15rem;\n    background-color: #D4DDE8;\n    padding: 1rem;\n`;\n\n\n\nconst FilledBanner = () => (\n\n    <StyledBanner>\n        <StyledContainer >\n\n            <Typography className=\"banner-heading\"  >Welcome to the Author's Area</Typography>\n            <Typography className=\"banner-sub\" sfs=\"3rem\">Submit your review ready papers by 26 January 2020</Typography>\n            <div className=\"banner_bottom\">\n                <ExpandMoreOutlinedIcon className=\"banner_bottom-icon\" />\n                <Typography varient=\"h3\" className=\"banner_bottom-details\">Submit your review ready papers by 26 January 2020</Typography>\n            </div>\n        </StyledContainer>\n    </StyledBanner>\n)\n\nclass AuthorsAreaDash extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            hasForm: false,\n            formData: undefined,\n            error: '',\n            userLoggedIn: false,\n        }\n\n\n    }\n\n    componentDidMount = () => {\n        const { userLoggedIn } = this.state;\n        const { logintoken } = cookie.get();\n        console.log('cdm', logintoken)\n        logintoken && !userLoggedIn ? this.setState(prev => ({\n            userLoggedIn: !prev\n        })) : null\n    }\n\n    getAbstractForm = async (e) => {\n        e.preventDefault()\n        console.log('click');\n        const { logintoken } = cookie.get();\n        console.log(logintoken)\n        try {\n            const apiUrl = 'https://prelude.eurobrake.net/submit';\n            const response = await fetch(apiUrl, {\n                credentials: 'include',\n                headers: {\n                    Authorization: `Bearer ${logintoken}`,\n                }\n            });\n            const data = await response.json();\n            if (data.status === 'success') {\n                this.setState(prev => (\n                    {\n                        hasForm: !prev,\n                        formData: data.form\n                    }));\n                // console.log(data.form);\n                // console.log('stringify',JSON.stringify(data.form));\n                console.log(data)\n\n\n            } else {\n                let error = new Error(data.error)\n                error.response = response\n                throw error\n            }\n        } catch (error) {\n            console.error(\n                'Failed to get form, please try again', error\n            )\n            this.setState({ error: error.message });\n        }\n    }\n\n\n    handleInputChange = (event) => {\n        const target = event.target;\n        const value = target.type === 'checkbox' ? target.checked : target.value;\n        const name = target.name;\n\n        this.setState({\n            [name]: value\n        });\n    }\n\n    render() {\n        // const {name} = this.props.authorData;\n        const { userLoggedIn, hasForm } = this.state;\n        console.log({ userLoggedIn, hasForm });\n        return (\n            <>\n                <HeroSection banner={FilledBanner}>\n                    Author's Area Dashboard\n            </HeroSection>\n                <StyledPage>\n                    <div className=\"authors\">\n\n                    <Typography className=\"authors-title\">Hi {'*USERNAME*'}</Typography>\n                    <Typography gutterBottom className=\"authors_sub-title\">Welcome to the Author's Area</Typography>\n                    <div className=\"authors_action-box\">\n                    <Button\n                        bcolor=\"#134381\"\n                        background=\"#134381\"\n                        br=\"100rem\"\n                        padding=\"0.5rem 2rem\"\n                        style={{ margin: \".5rem 0\" }}\n                        fontSize=\"1.7rem\"\n                        onClick={this.getAbstractForm}>\n                        <CreateIcon style={{fontSize: '3rem', marginRight: '1rem'}}/>\n                        EDIT PROFILE\n                    </Button>\n                    <Button\n                        bcolor=\"#134381\"\n                        padding=\"0.5rem 2rem\"\n                        background=\"#134381\"\n                        br=\"100rem\"\n                        style={{ margin: \".5rem\" }}\n                        fontSize=\"1.7rem\"\n                        onClick={this.getAbstractForm}>\n                        <AssignmentIcon style={{fontSize: '3rem', marginRight: '.5rem'}}/>\n                        INSTRUCTIONS & TEMPLATES\n                    </Button>\n                    <Button\n                        bcolor=\"#134381\"\n                        padding=\"0.5rem 2rem\"\n                        background=\"#134381\"\n                        br=\"100rem\"\n                        style={{ margin: \".5rem 0\" }}\n                        fontSize=\"1.7rem\"\n                        onClick={logout}>\n                        <ExitToAppIcon style={{fontSize: '3rem', marginRight: '.5rem'}}/>\n                        logout\n                    </Button>\n                    </div>\n                    <Typography gutterBottom className=\"authors-title\" style={{fontSize: '3rem', borderTop: '2px solid #134381', borderBottom: '2px solid #134381' }}>Your Abstracts</Typography>\n                    <StyledBox>\n                    <Typography gutterBottom className=\"authors-it\" style={{fontSize: '2rem'}}>You haven't submitted any abstracts yet</Typography>\n                    </StyledBox>\n                    </div>\n                </StyledPage>\n            </>\n\n        )\n\n    }\n}\n\n// AuthorsAreaDash.getInitialProps = async ctx => {\n//     // We use `nextCookie` to get the cookie and pass the token to the frontend in the `props`.\n//     const { logintoken } = cookies(ctx);\n//     const apiUrl = 'https://prelude.eurobrake.net/dashboard ';\n//     const redirectOnError = () =>\n//         process.browser\n//             ? Router.push('/authorsArea')\n//             : ctx.res.writeHead(301, { Location: '/authorsArea' })\n//     if (logintoken) {\n//         try {\n//             // console.log({logintoken}, 'getIProps right before fetch call')\n//             const response = await fetch(apiUrl, {\n//                 credentials: 'include',\n//                 cache: 'no-cache',\n//                 headers: {\n//                     Authorization: 'Bearer ' + logintoken,\n//                 }\n//             })\n//             const data = await response.json()\n//             // console.log('Authors response Data =>', data.status, data);\n//             if (data.status === 'success') {\n//                 console.log('res.ok', data)\n//                 return { authorData: data }\n//             }\n//             else {\n//                 console.log('not reading success')\n//                 // https://github.com/developit/unfetch#caveats\n//                 return redirectOnError()\n//             }\n//         } catch (error) {\n//             // Implementation or Network error\n//             console.log(error)\n//             return redirectOnError()\n//         }\n//     }\n\n// }\n\n// export default withAuthSync(AuthorsAreaDash)\nexport default AuthorsAreaDash\n\n\n// !\n// ?\n// *\n// todo"]},"metadata":{},"sourceType":"module"}