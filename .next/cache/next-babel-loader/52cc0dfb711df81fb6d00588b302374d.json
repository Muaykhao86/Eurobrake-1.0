{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport Router from 'next/router';\nimport cookies from 'next-cookies';\nimport cookie from 'js-cookie';\nimport { Link } from '@material-ui/core';\nimport fetch from 'isomorphic-unfetch';\nimport styled from 'styled-components';\nimport Typography from '@material-ui/core/Typography';\nimport ExpandMoreOutlinedIcon from '@material-ui/icons/ExpandMoreOutlined';\nimport { withAuthSync, logout, login } from '../utils/auth';\nimport HeroSection from '../components/HeroSection';\nimport { Button } from '../components/Button';\nimport { StyledBanner, StyledContainer } from '../components/styles/PageStyles';\nimport { Abstracts } from '../components/testAuthors';\nimport { GetForm, SendFile } from '../components/Forms';\nimport Popup from '../components/Popup';\nconst StyledPage = styled.div.withConfig({\n  displayName: \"edit__StyledPage\",\n  componentId: \"sc-1a15lzv-0\"\n})([\"display:flex;flex-direction:column;align-self:center;width:\", \";background-color:\", \";margin-top:7rem;.authors{color:\", \";font-family:\", \";font-size:2rem;&-title{color:\", \";font-family:\", \";font-size:4.4rem;}&_sub-title{color:\", \";font-size:3.5rem;font-family:\", \";padding-bottom:.5rem;}&-bold{color:\", \";font-family:\", \";}&-it{font-family:\", \";}&_action-box{display:flex;justify-content:space-between;margin-bottom:3rem;}}\"], props => props.theme.minWidth, props => props.theme.white, props => props.theme.primary, props => props.theme.MPLight, props => props.theme.primary, props => props.theme.MPSemibold, props => props.theme.primary, props => props.theme.MPLightIt, props => props.theme.primary, props => props.theme.MPBold, props => props.theme.MPLightIt);\nconst StyledBox = styled.div.withConfig({\n  displayName: \"edit__StyledBox\",\n  componentId: \"sc-1a15lzv-1\"\n})([\"display:flex;justify-content:space-between;min-height:15rem;background-color:#D4DDE8;padding:1rem;margin-bottom:2rem;\"]);\nconst StyledActionArea = styled.div.withConfig({\n  displayName: \"edit__StyledActionArea\",\n  componentId: \"sc-1a15lzv-2\"\n})([\"flex:1 1 33.33%;display:flex;flex-flow:column;justify-content:space-between;align-items:flex-start;.action-paper{color:\", \";font-family:\", \";font-size:2rem;}\"], props => props.theme.black, props => props.theme.MPBold);\nconst StyledInfoArea = styled.div.withConfig({\n  displayName: \"edit__StyledInfoArea\",\n  componentId: \"sc-1a15lzv-3\"\n})([\"flex:1 1 66.66%;display:flex;flex-flow:column;justify-content:space-between;align-items:flex-start;.paper-title{font-size:2rem;color:\", \";}.paper-type{font-size:2rem;color:\", \";font-family:\", \";}.paper_task{color:\", \";font-size:1.5rem;&-box{display:flex;align-items:flex-start;}}\"], props => props.theme.black, props => props.theme.black, props => props.theme.MPLightIt, props => props.theme.black);\n\nconst FilledBanner = () => __jsx(StyledBanner, null, __jsx(StyledContainer, null, __jsx(Typography, {\n  className: \"banner-heading\"\n}, \"Edit Your Abstract Here\"), __jsx(Typography, {\n  className: \"banner-sub\",\n  sfs: \"3rem\"\n}, \"Submit your review ready papers by 26 January 2020\"), __jsx(\"div\", {\n  className: \"banner_bottom\"\n}, __jsx(ExpandMoreOutlinedIcon, {\n  className: \"banner_bottom-icon\"\n}), __jsx(Typography, {\n  varient: \"h3\",\n  className: \"banner_bottom-details\"\n}, \"Submit your review ready papers by 26 January 2020\"))));\n\nconst url = {\n  edit: 'https://prelude.eurobrake.net/edit/EB2020-MDS-002',\n  editdef: 'https://prelude.eurobrake.net/edit/EB2020-MDS-002?definition=1',\n  upload: 'https://prelude.eurobrake.net/upload'\n};\n\nclass Edit extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"componentDidMount\", () => {\n      const {\n        userLoggedIn\n      } = this.state;\n      const {\n        logintoken\n      } = cookie.get();\n      console.log('cdm', logintoken);\n      logintoken && !userLoggedIn ? this.setState(prev => ({\n        userLoggedIn: !prev\n      })) : null;\n    });\n\n    _defineProperty(this, \"handleInputChange\", event => {\n      const target = event.target;\n      const value = target.type === 'checkbox' ? target.checked : target.value;\n      const name = target.name;\n      this.setState({\n        [name]: value\n      });\n    });\n\n    this.state = {\n      formdata: ''\n    };\n  }\n\n  render() {\n    return __jsx(React.Fragment, null, __jsx(HeroSection, {\n      banner: FilledBanner\n    }, \"Edit Your Abstract\"), __jsx(StyledPage, null, __jsx(\"div\", {\n      className: \"authors\"\n    }, __jsx(Typography, {\n      className: \"authors-title\"\n    }, \"Hi \", '*USERNAME*'), __jsx(Typography, {\n      gutterBottom: true,\n      className: \"authors_sub-title\"\n    }, \"Edit Your Abstract\"))));\n  }\n\n}\n\nEdit.getInitialProps = async ctx => {\n  // We use `nextCookie` to get the cookie and pass the token to the frontend in the `props`.\n  const {\n    logintoken\n  } = cookies(ctx);\n  const apiUrl = 'https://prelude.eurobrake.net/dashboard ';\n\n  const redirectOnError = () => process.browser ? Router.push('/authorsArea') : ctx.res.writeHead(301, {\n    Location: '/authorsArea'\n  });\n\n  if (logintoken) {\n    try {\n      const response = await fetch(apiUrl, {\n        credentials: 'include',\n        cache: 'no-cache',\n        headers: {\n          Authorization: 'Bearer ' + logintoken\n        }\n      });\n      const data = await response.json(); // console.log('Authors response Data =>', data.status, data);\n\n      if (data.status === 'success') {\n        console.log('res.ok', data);\n        return {\n          authorData: data\n        };\n      } else {\n        console.log('not reading success');\n        console.log('stringyfied', _JSON$stringify(data)); // https://github.com/developit/unfetch#caveats\n\n        return redirectOnError();\n      }\n    } catch (error) {\n      // Implementation or Network error\n      console.log(error);\n      return redirectOnError();\n    }\n  }\n};\n\nexport default withAuthSync(Edit); // export default AuthorsAreaDash\n// !\n// ?\n// *\n// todo","map":null,"metadata":{},"sourceType":"module"}