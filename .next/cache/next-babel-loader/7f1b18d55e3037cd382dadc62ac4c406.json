{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nvar _jsxFileName = \"/mnt/c/Users/D.Hardiman/desktop/eurobrake/pages/authorsArea.js\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport Router from 'next/router';\nimport nextCookie from 'next-cookies';\nimport fetch from 'isomorphic-unfetch';\nimport styled from 'styled-components';\nimport { withAuthSync, logout } from '../utils/auth';\nconst DemoDiv = styled.form.withConfig({\n  displayName: \"authorsArea__DemoDiv\",\n  componentId: \"sc-17gi1ng-0\"\n})([\"display:flex;flex-direction:column;align-self:center;margin-top:10rem;max-width:\", \";\"], props => props.theme.maxWidth);\nconst Demo = styled.h1.withConfig({\n  displayName: \"authorsArea__Demo\",\n  componentId: \"sc-17gi1ng-1\"\n})([\"padding:10rem;margin:5rem;color:orangered;\"]);\n\nclass AuthorsArea extends Component {\n  constructor(props) {\n    super(props);\n    const {\n      data\n    } = props;\n  }\n\n  render() {\n    console.log(data);\n    return __jsx(\"div\", {\n      className: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37\n      },\n      __self: this\n    }, __jsx(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38\n      },\n      __self: this\n    }, \"you are logged In\"), __jsx(\"button\", {\n      onClick: () => logout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    }, \"logout\"));\n  }\n\n}\n\nAuthorsArea.getInitialProps = async ctx => {\n  // We use `nextCookie` to get the cookie and pass the token to the\n  // frontend in the `props`.\n  const {\n    token\n  } = nextCookie(ctx);\n\n  const redirectOnError = () => process.browser ? Router.push('/login') : ctx.res.writeHead(301, {\n    Location: '/login'\n  });\n\n  try {\n    const response = await fetch(apiUrl, {\n      credentials: 'include',\n      headers: {\n        Authorization: _JSON$stringify({\n          token\n        })\n      }\n    });\n\n    if (response.ok) {\n      return await response.json();\n    } else {\n      // https://github.com/developit/unfetch#caveats\n      return redirectOnError();\n    }\n  } catch (error) {\n    // Implementation or Network error\n    return redirectOnError();\n  }\n};\n\nexport default withAuthSync(AuthorsArea);","map":{"version":3,"sources":["/mnt/c/Users/D.Hardiman/desktop/eurobrake/pages/authorsArea.js"],"names":["React","Component","Router","nextCookie","fetch","styled","withAuthSync","logout","DemoDiv","form","props","theme","maxWidth","Demo","h1","AuthorsArea","constructor","data","render","console","log","getInitialProps","ctx","token","redirectOnError","process","browser","push","res","writeHead","Location","response","apiUrl","credentials","headers","Authorization","ok","json","error"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAASC,YAAT,EAAuBC,MAAvB,QAAqC,eAArC;AAGA,MAAMC,OAAO,GAAGH,MAAM,CAACI,IAAV;AAAA;AAAA;AAAA,8FAMIC,KAAK,IAAIA,KAAK,CAACC,KAAN,CAAYC,QANzB,CAAb;AAWA,MAAMC,IAAI,GAAGR,MAAM,CAACS,EAAV;AAAA;AAAA;AAAA,kDAAV;;AAQA,MAAMC,WAAN,SAA0Bd,SAA1B,CAAoC;AACpCe,EAAAA,WAAW,CAACN,KAAD,EAAQ;AACf,UAAMA,KAAN;AAEA,UAAM;AAAEO,MAAAA;AAAF,QAAWP,KAAjB;AACH;;AACDQ,EAAAA,MAAM,GAAE;AACJC,IAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ;AACA,WACI;AAAK,MAAA,SAAS,EAAC,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADA,EAKA;AAAQ,MAAA,OAAO,EAAE,MAAMV,MAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBALA,CADJ;AASH;;AAjBmC;;AAoBpCQ,WAAW,CAACM,eAAZ,GAA8B,MAAMC,GAAN,IAAa;AACzC;AACA;AACA,QAAM;AAAEC,IAAAA;AAAF,MAAYpB,UAAU,CAACmB,GAAD,CAA5B;;AAEA,QAAME,eAAe,GAAG,MACtBC,OAAO,CAACC,OAAR,GACIxB,MAAM,CAACyB,IAAP,CAAY,QAAZ,CADJ,GAEIL,GAAG,CAACM,GAAJ,CAAQC,SAAR,CAAkB,GAAlB,EAAuB;AAAEC,IAAAA,QAAQ,EAAE;AAAZ,GAAvB,CAHN;;AAKA,MAAI;AACF,UAAMC,QAAQ,GAAG,MAAM3B,KAAK,CAAC4B,MAAD,EAAS;AACnCC,MAAAA,WAAW,EAAE,SADsB;AAEnCC,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAE,gBAAe;AAAEZ,UAAAA;AAAF,SAAf;AADR;AAF0B,KAAT,CAA5B;;AAOA,QAAIQ,QAAQ,CAACK,EAAb,EAAiB;AACf,aAAO,MAAML,QAAQ,CAACM,IAAT,EAAb;AACD,KAFD,MAEO;AACL;AACA,aAAOb,eAAe,EAAtB;AACD;AACF,GAdD,CAcE,OAAOc,KAAP,EAAc;AACd;AACA,WAAOd,eAAe,EAAtB;AACD;AACF,CA5BD;;AA8BA,eAAelB,YAAY,CAACS,WAAD,CAA3B","sourcesContent":["import React, {Component} from 'react'\nimport Router from 'next/router';\nimport nextCookie from 'next-cookies';\nimport fetch from 'isomorphic-unfetch';\nimport styled from 'styled-components';\nimport { withAuthSync, logout } from '../utils/auth'\n\n\nconst DemoDiv = styled.form`\n\n    display: flex;\n    flex-direction: column;\n    align-self: center;\n    margin-top: 10rem;\n    max-width: ${props => props.theme.maxWidth};\n\n`;\n\n\nconst Demo = styled.h1`\n    padding: 10rem;\n    margin: 5rem;\n    color: orangered;\n\n`;\n\n\nclass AuthorsArea extends Component {\nconstructor(props) {\n    super(props);\n    \n    const { data } = props;\n}\nrender(){\n    console.log(data);\n    return(\n        <div className=\"\">\n        <h1>\n            you are logged In\n        </h1>\n\n        <button onClick={() => logout}>logout</button>\n        </div>\n    )\n}\n}\n\nAuthorsArea.getInitialProps = async ctx => {\n  // We use `nextCookie` to get the cookie and pass the token to the\n  // frontend in the `props`.\n  const { token } = nextCookie(ctx)\n\n  const redirectOnError = () =>\n    process.browser\n      ? Router.push('/login')\n      : ctx.res.writeHead(301, { Location: '/login' })\n\n  try {\n    const response = await fetch(apiUrl, {\n      credentials: 'include',\n      headers: {\n        Authorization: JSON.stringify({ token })\n      }\n    })\n\n    if (response.ok) {\n      return await response.json()\n    } else {\n      // https://github.com/developit/unfetch#caveats\n      return redirectOnError()\n    }\n  } catch (error) {\n    // Implementation or Network error\n    return redirectOnError()\n  }\n}\n\nexport default withAuthSync(AuthorsArea)"]},"metadata":{},"sourceType":"module"}