{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport React from 'react';\nimport cookie from 'js-cookie';\nexport async function GetForm(url) {\n  const {\n    logintoken\n  } = cookie.get();\n  console.log({\n    logintoken\n  });\n\n  try {\n    const apiUrl = url;\n    const response = await fetch(apiUrl, {\n      credentials: 'include',\n      headers: {\n        Authorization: 'Bearer ' + logintoken\n      }\n    });\n    const data = await response.json();\n\n    if (data.status === 'success') {\n      console.log('getForm', data);\n      console.log('tkn', data.__csrf_token);\n      return data.__csrf_token;\n    } else {\n      let error = new Error(data.error);\n      error.response = response;\n      throw error;\n    }\n  } catch (error) {\n    console.error('Failed to get form, please try again', error); // return error.message\n  }\n\n  return;\n}\nexport async function SendFile({\n  csrf,\n  file\n}) {\n  const formData = new FormData();\n  const {\n    logintoken\n  } = cookie.get();\n  formData.append('__csrf_token', {\n    csrf\n  });\n  formData.append('filename', {\n    file\n  });\n  console.log({\n    logintoken,\n    csrf,\n    file\n  });\n\n  if (logintoken && csrf && file) {\n    try {\n      const apiUrl = 'https://prelude.eurobrake.net/upload';\n      const response = await fetch(apiUrl, {\n        method: 'PUT',\n        body: formData,\n        credentials: 'include',\n        headers: {\n          Authorization: 'Bearer ' + logintoken\n        }\n      });\n      const data = await response.json();\n\n      if (data.status === 'success') {\n        console.log('getForm', data);\n      } else {\n        let error = new Error(data.error);\n        error.response = response;\n        throw error;\n      }\n    } catch (error) {\n      console.error('Failed to get form, please try again', error); // this.setState({ error: error.message });\n    }\n  }\n\n  return;\n}\nexport async function SendForm({\n  csrf,\n  formData,\n  url\n}) {\n  const form = _JSON$stringify(formData);\n\n  const {\n    logintoken\n  } = cookie.get();\n\n  if (logintoken && csrf && formData) {\n    try {\n      const apiUrl = url;\n      const response = await fetch(apiUrl, {\n        body: form,\n        credentials: 'include',\n        headers: {\n          Authorization: 'Bearer ' + logintoken\n        }\n      });\n      const data = await response.json();\n\n      if (data.status === 'success') {\n        console.log('getForm', data);\n      } else {\n        let error = new Error(data.error);\n        error.response = response;\n        throw error;\n      }\n    } catch (error) {\n      console.error('Failed to get form, please try again', error); // this.setState({ error: error.message });\n    }\n  }\n\n  return;\n}","map":null,"metadata":{},"sourceType":"module"}