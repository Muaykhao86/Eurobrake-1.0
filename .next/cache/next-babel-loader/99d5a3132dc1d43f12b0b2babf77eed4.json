{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/mnt/c/Users/D.Hardiman/desktop/eurobrake/components/forms/LoginForm.js\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport { StyledForm } from './Formstyles';\nimport fetch from 'isomorphic-unfetch';\nimport TextField from '@material-ui/core/TextField';\nimport { login, logout } from '../../utils/auth';\nimport { Button } from '../Button';\nexport default class LoginForm extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"saveToState\", e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    });\n\n    _defineProperty(this, \"onSubmit\", async e => {\n      e.preventDefault();\n      const {\n        username,\n        password,\n        error\n      } = this.state; // const apiUrl = authorLogin ? 'https://prelude.eurobrake.net/login' : '' ;\n      // action=\"//2019.eurobrake.net/exhibition/exhibitors/login\" SHOULD BE LOGIN FORM FOR EXHIBITORS\n\n      const formData = {\n        username: username,\n        password: password\n      };\n\n      try {\n        const response = await fetch('https://prelude.eurobrake.net/login', {\n          method: 'POST',\n          credentials: 'include',\n          body: _JSON$stringify(formData),\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n        const data = await response.json();\n\n        if (data2.status === 'success') {\n          const {\n            logintoken\n          } = data;\n          await login({\n            logintoken\n          });\n          return {};\n        } else {\n          let error = new Error(data.error);\n          error.response = response;\n          throw error;\n        }\n      } catch (error) {\n        console.error('Failed to login, please try again', error);\n        this.setState({\n          error: error.message\n        });\n      }\n    });\n\n    this.state = {\n      username: '',\n      password: '',\n      error: ''\n    };\n  }\n\n  render() {\n    return __jsx(StyledForm, {\n      className: \"login_form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: \"login_form-field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, __jsx(\"label\", {\n      htmlFor: \"label\",\n      className: \"login_form-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, \"Email:\"), __jsx(TextField, {\n      style: {\n        color: '#134381'\n      },\n      label: \"Required\",\n      className: \"login_form-input\",\n      type: \"text\",\n      name: \"username\",\n      onChange: this.saveToState,\n      value: this.state.username,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    })), __jsx(\"div\", {\n      className: \"login_form-field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, __jsx(\"label\", {\n      className: \"login_form-label\",\n      htmlFor: \"label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, \"Password:\"), __jsx(TextField, {\n      label: \"Required\",\n      className: \"login_form-input\",\n      type: \"password\",\n      name: \"password\",\n      onChange: this.saveToState,\n      value: this.state.password,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    })), __jsx(Button, {\n      onClick: this.onSubmit,\n      value: \"Submit\",\n      bcolor: \"#134381\",\n      background: \"#134381\",\n      br: \"100rem\",\n      style: {\n        margin: \"3rem 0\"\n      },\n      fs: \"1.8rem\",\n      padding: \".5rem 6rem\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, \"Login\"), __jsx(\"a\", {\n      className: \"login_form-link\",\n      href: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, \"Forgotten your password?\"));\n  }\n\n}","map":{"version":3,"sources":["/mnt/c/Users/D.Hardiman/desktop/eurobrake/components/forms/LoginForm.js"],"names":["React","Component","StyledForm","fetch","TextField","login","logout","Button","LoginForm","constructor","props","e","setState","target","name","value","preventDefault","username","password","error","state","formData","response","method","credentials","body","headers","data","json","data2","status","logintoken","Error","console","message","render","color","saveToState","onSubmit","margin"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport {StyledForm} from './Formstyles';\nimport fetch from 'isomorphic-unfetch';\nimport TextField from '@material-ui/core/TextField';\nimport { login, logout } from '../../utils/auth';\nimport {Button} from '../Button';\n\n\nexport default class LoginForm extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            username: '',\n            password: '',\n            error: ''\n        }\n    }\n\n    saveToState = (e) => {\n        this.setState({ [e.target.name]: e.target.value });\n    }\n\n    onSubmit = async (e) => {\n        e.preventDefault()\n        const { username, password, error } = this.state;\n        // const apiUrl = authorLogin ? 'https://prelude.eurobrake.net/login' : '' ;\n        // action=\"//2019.eurobrake.net/exhibition/exhibitors/login\" SHOULD BE LOGIN FORM FOR EXHIBITORS\n        const formData = {\n            username: username,\n            password: password,\n        }\n        try {\n            const response = await fetch('https://prelude.eurobrake.net/login', {\n                method: 'POST', \n                credentials: 'include',\n                body: JSON.stringify(formData),\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n            });\n         \n            const data = await response.json()\n            \n       \n\n            if (data2.status === 'success') {\n                const { logintoken } = data;\n                await login({ logintoken })\n                return {}\n\n            } else {\n                let error = new Error(data.error)\n                error.response = response\n                throw error\n            }\n        } catch (error) {\n            console.error(\n                'Failed to login, please try again', error\n            )\n            this.setState({ error: error.message });\n        }\n    }\n    render() {\n        return (\n           \n                   <StyledForm className=\"login_form\">\n                        <div className=\"login_form-field\">\n                            <label \n                            htmlFor=\"label\" \n                            className=\"login_form-label\">\n                                Email:\n                            </label>\n                            <TextField\n                            style={{color: '#134381'}}\n                            label=\"Required\"\n                            className=\"login_form-input\" \n                            type=\"text\"\n                            name=\"username\"\n                            onChange={this.saveToState} \n                            value={this.state.username} />\n                        </div>\n                        <div className=\"login_form-field\">\n                            <label \n                            className=\"login_form-label\"\n                             htmlFor=\"label\">\n                                Password:\n                            </label>\n                            <TextField\n                            label=\"Required\"\n                            className=\"login_form-input\" \n                            type=\"password\"\n                            name=\"password\"\n                            onChange={this.saveToState} \n                            value={this.state.password} />\n                        </div>\n                        <Button \n                        onClick={this.onSubmit} \n                        value=\"Submit\" \n                        bcolor=\"#134381\"\n                        background=\"#134381\"\n                        br=\"100rem\"\n                        style={{ margin: \"3rem 0\"}}\n                        fs=\"1.8rem\"\n                        padding=\".5rem 6rem\"\n                        >Login</Button>\n                        <a className=\"login_form-link\" href=\"\">Forgotten your password?</a>\n                   </StyledForm>\n          \n             \n        )\n    }\n}\n\n"]},"metadata":{},"sourceType":"module"}