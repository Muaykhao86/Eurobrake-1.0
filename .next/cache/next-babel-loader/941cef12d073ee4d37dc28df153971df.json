{"ast":null,"code":"var _jsxFileName = \"/mnt/c/Users/D.Hardiman/desktop/eurobrake/pages/authorsArea.js\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport Router from 'next/router';\nimport nextCookie from 'next-cookies';\nimport fetch from 'isomorphic-unfetch';\nimport styled from 'styled-components';\nimport { withAuthSync, logout } from '../utils/auth';\nconst DemoDiv = styled.form.withConfig({\n  displayName: \"authorsArea__DemoDiv\",\n  componentId: \"sc-17gi1ng-0\"\n})([\"display:flex;flex-direction:column;align-self:center;margin-top:10rem;max-width:\", \";\"], props => props.theme.maxWidth);\nconst Demo = styled.h1.withConfig({\n  displayName: \"authorsArea__Demo\",\n  componentId: \"sc-17gi1ng-1\"\n})([\"padding:10rem;margin:5rem;color:orangered;\"]);\n\nclass AuthorsArea extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const {\n      data\n    } = this.props;\n    console.log(data);\n    return __jsx(DemoDiv, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36\n      },\n      __self: this\n    }, __jsx(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37\n      },\n      __self: this\n    }, \"you are logged In\"), __jsx(\"button\", {\n      onClick: () => logout(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41\n      },\n      __self: this\n    }, \"logout\"));\n  }\n\n}\n\nAuthorsArea.getInitialProps = async ctx => {\n  // We use `nextCookie` to get the cookie and pass the token to the\n  // frontend in the `props`.\n  const {\n    logintoken\n  } = nextCookie(ctx);\n  const apiUrl = 'https://prelude.eurobrake.net/dashboard ';\n\n  const redirectOnError = () => process.browser ? Router.push('/login') : ctx.res.writeHead(301, {\n    Location: '/login'\n  });\n\n  try {\n    const response = await fetch(apiUrl, {\n      credentials: 'include'\n    });\n\n    if (response.status !== 'error') {\n      const js = await response.json();\n      console.log('js', js);\n      return js;\n    } else {\n      // https://github.com/developit/unfetch#caveats\n      return redirectOnError();\n    }\n  } catch (error) {\n    // Implementation or Network error\n    return redirectOnError();\n  }\n};\n\nexport default withAuthSync(AuthorsArea); //   headers: {\n//         Authorization: JSON.stringify({ token })\n//       }","map":{"version":3,"sources":["/mnt/c/Users/D.Hardiman/desktop/eurobrake/pages/authorsArea.js"],"names":["React","Component","Router","nextCookie","fetch","styled","withAuthSync","logout","DemoDiv","form","props","theme","maxWidth","Demo","h1","AuthorsArea","constructor","render","data","console","log","getInitialProps","ctx","logintoken","apiUrl","redirectOnError","process","browser","push","res","writeHead","Location","response","credentials","status","js","json","error"],"mappings":";;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAASC,YAAT,EAAuBC,MAAvB,QAAqC,eAArC;AAGA,MAAMC,OAAO,GAAGH,MAAM,CAACI,IAAV;AAAA;AAAA;AAAA,8FAMIC,KAAK,IAAIA,KAAK,CAACC,KAAN,CAAYC,QANzB,CAAb;AAWA,MAAMC,IAAI,GAAGR,MAAM,CAACS,EAAV;AAAA;AAAA;AAAA,kDAAV;;AAOA,MAAMC,WAAN,SAA0Bd,SAA1B,CAAoC;AACpCe,EAAAA,WAAW,CAACN,KAAD,EAAQ;AACf,UAAMA,KAAN;AAEH;;AACDO,EAAAA,MAAM,GAAE;AACJ,UAAM;AAAEC,MAAAA;AAAF,QAAW,KAAKR,KAAtB;AACAS,IAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACA,WACI,MAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADA,EAKA;AAAQ,MAAA,OAAO,EAAE,MAAMX,MAAM,EAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBALA,CADJ;AASH;;AAjBmC;;AAoBpCQ,WAAW,CAACM,eAAZ,GAA8B,MAAMC,GAAN,IAAa;AACzC;AACA;AACA,QAAM;AAAEC,IAAAA;AAAF,MAAiBpB,UAAU,CAACmB,GAAD,CAAjC;AACE,QAAME,MAAM,GAAG,0CAAf;;AAEF,QAAMC,eAAe,GAAG,MACtBC,OAAO,CAACC,OAAR,GACIzB,MAAM,CAAC0B,IAAP,CAAY,QAAZ,CADJ,GAEIN,GAAG,CAACO,GAAJ,CAAQC,SAAR,CAAkB,GAAlB,EAAuB;AAAEC,IAAAA,QAAQ,EAAE;AAAZ,GAAvB,CAHN;;AAIA,MAAI;AACF,UAAMC,QAAQ,GAAG,MAAM5B,KAAK,CAACoB,MAAD,EAAS;AACnCS,MAAAA,WAAW,EAAE;AADsB,KAAT,CAA5B;;AAKA,QAAID,QAAQ,CAACE,MAAT,KAAoB,OAAxB,EAAiC;AAC/B,YAAMC,EAAE,GAAG,MAAMH,QAAQ,CAACI,IAAT,EAAjB;AACAjB,MAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ,EAAkBe,EAAlB;AACA,aAAOA,EAAP;AAED,KALD,MAKO;AACL;AACA,aAAOV,eAAe,EAAtB;AACD;AACF,GAfD,CAeE,OAAOY,KAAP,EAAc;AACd;AACA,WAAOZ,eAAe,EAAtB;AACD;AAEF,CA9BD;;AAgCA,eAAenB,YAAY,CAACS,WAAD,CAA3B,C,CAEA;AACA;AACA","sourcesContent":["import React, {Component} from 'react'\nimport Router from 'next/router';\nimport nextCookie from 'next-cookies';\nimport fetch from 'isomorphic-unfetch';\nimport styled from 'styled-components';\nimport { withAuthSync, logout } from '../utils/auth'\n\n\nconst DemoDiv = styled.form`\n\n    display: flex;\n    flex-direction: column;\n    align-self: center;\n    margin-top: 10rem;\n    max-width: ${props => props.theme.maxWidth};\n\n`;\n\n\nconst Demo = styled.h1`\n    padding: 10rem;\n    margin: 5rem;\n    color: orangered;\n`;\n\n\nclass AuthorsArea extends Component {\nconstructor(props) {\n    super(props);\n    \n}\nrender(){\n    const { data } = this.props;\n    console.log(data);\n    return(\n        <DemoDiv>\n        <h1>\n            you are logged In\n        </h1>\n\n        <button onClick={() => logout()}>logout</button>\n        </DemoDiv>\n    )\n}\n}\n\nAuthorsArea.getInitialProps = async ctx => {\n  // We use `nextCookie` to get the cookie and pass the token to the\n  // frontend in the `props`.\n  const { logintoken } = nextCookie(ctx);\n    const apiUrl = 'https://prelude.eurobrake.net/dashboard ';\n\n  const redirectOnError = () =>\n    process.browser\n      ? Router.push('/login')\n      : ctx.res.writeHead(301, { Location: '/login' })\n  try {\n    const response = await fetch(apiUrl, {\n      credentials: 'include',\n     \n    })\n\n    if (response.status !== 'error') {\n      const js = await response.json()\n      console.log('js', js)\n      return js\n\n    } else {\n      // https://github.com/developit/unfetch#caveats\n      return redirectOnError()\n    }\n  } catch (error) {\n    // Implementation or Network error\n    return redirectOnError()\n  }\n\n}\n\nexport default withAuthSync(AuthorsArea)\n\n//   headers: {\n//         Authorization: JSON.stringify({ token })\n//       }"]},"metadata":{},"sourceType":"module"}